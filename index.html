<!-- index.html -->
<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>모둠 준비물 확인기</title>
<link rel="stylesheet" href="style.css" />
</head>
<body>
<div class="app">
<header class="top">
<h1>모둠 준비물 확인기</h1>
<p class="subtitle">방장/부방장은 이름으로 인증 — 이름을 저장한 관리자만 준비물을 설정할 수 있어요.</p>
</header>


<main class="grid">
<section class="card">
<h2>내 준비물 확인</h2>
<div class="row">
<input id="nameInput" placeholder="이름을 입력하세요" />
<button id="checkBtn">확인</button>
</div>
<ul id="myList" class="list"></ul>
</section>


<section class="card">
<h2>방장 / 부방장 설정</h2>
<p class="muted">방장과 부방장 이름을 쉼표로 구분해 입력하고 저장하세요. 예: 민수, 지윤</p>
<div class="row">
<input id="leaderNames" placeholder="예: 민수, 지윤" />
<button id="saveLeaders">저장</button>
</div>


<hr />


<h3>관리자 모드 (방장/부방장 이름으로 확인)</h3>
<div class="row">
<input id="adminName" placeholder="방장/부방장 이름 입력" />
<button id="becomeAdmin">관리자 모드</button>
</div>


<div id="adminPanel" class="admin-panel" aria-hidden="true">
<h4>멤버 + 준비물 추가 (관리자 전용)</h4>
<div class="row">
<input id="memberName" placeholder="멤버 이름" />
<input id="itemName" placeholder="준비물" />
<button id="addItem">추가</button>
</div>


<h4>전체 데이터</h4>
<ul id="allData" class="list"></ul>


<div class="row small">
<button id="exportBtn">내보내기 (JSON)</button>
<label class="filebtn">불러오기
<input id="importFile" type="file" accept="application/json" />
</label>
<button id="clearBtn">데이터 초기화</button>
</div>
</div>
</section>
</main>


<footer class="foot">메시지: <span id="msg">준비물 관리 앱 (로컬 저장)</span></footer>
</div>


<script>
// 간단한 로컬 저장 앱 (index.html + style.css)
const STORAGE_KEY = 'group_items_v1';
const LEADERS_KEY = 'group_leaders_v1';
let data = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
let leaders = JSON.parse(localStorage.getItem(LEADERS_KEY) || '[]');
let isAdmin = false;


// DOM
const nameInput = document.getElementById('nameInput');
const checkBtn = document.getElementById('checkBtn');
const myList = document.getElementById('myList');
const leaderNames = document.getElementById('leaderNames');
const saveLeaders = document.getElementById('saveLeaders');
const adminName = document.getElementById('adminName');
const becomeAdmin = document.getElementById('becomeAdmin');
const adminPanel = document.getElementById('adminPanel');
const memberName = document.getElementById('memberName');
const itemName = document.getElementById('itemName');
const addItemBtn = document.getElementById('addItem');
const allData = document.getElementById('allData');
const msg = document.getElementById('msg');
const exportBtn = document.getElementById('exportBtn');
const importFile = document.getElementById('importFile');
const clearBtn = document.getElementById('clearBtn');


function save() {
localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
localStorage.setItem(LEADERS_KEY, JSON.stringify(leaders));
renderAll();
}


function renderAll() {
allData.innerHTML = '';
const keys = Object.keys(data);
if (keys.length === 0) {
allData.innerHTML = '<li class="muted">아직 추가된 멤버가 없습니다.</li>';
return;
}
keys.forEach(name => {
const li = document.createElement('li');
li.textContent = name + ' : ' + data[name].join(', ');
allData.appendChild(li);
});
}


function setLeaders() {
leaders = leaderNames.value.split(',').map(v=>v.trim()).filter(Boolean);
localStorage.setItem(LEADERS_KEY, JSON.stringify(leaders));
msg.textContent = '방장/부방장 저장됨: ' + leaders.join(', ');
}


function tryBecomeAdmin() {
const name = adminName.value.trim();
if (!name) return alert('이름을 입력하세요');
if (leaders.includes(name)) {
isAdmin = true;
adminPanel.setAttribute('aria-hidden', 'false');
renderAll();
</script>


</body>
</html>
